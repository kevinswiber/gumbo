# Task 2.2: Wire `make_space_for_edge_labels` into Layout Pipeline

## Objective
Call `make_space_for_edge_labels()` at the right point in the layout pipeline â€” after constructing the `LayoutGraph` but before ranking.

## Location
Modify: `src/dagre/mod.rs` â€” `layout_with_labels()` function

## TDD Phases

### ðŸ”´ Red: Write Failing Tests

```rust
#[test]
fn test_layout_with_labels_creates_rank_gap() {
    // A -> B with label, should end up 2 ranks apart
    let mut g = DiGraph::new();
    let a = g.add_node("A", 5.0, 3.0);
    let b = g.add_node("B", 5.0, 3.0);
    g.add_edge(a, b);

    let mut edge_labels = HashMap::new();
    edge_labels.insert(0, EdgeLabelInfo::new(5.0, 1.0));

    let result = layout_with_labels(&g, &LayoutConfig::default(), &edge_labels);

    // A and B should be at least 2 ranks apart in the result
    // (verify via node y-positions being further apart than without label)
    let a_y = result.positions[0].y;
    let b_y = result.positions[1].y;
    assert!(b_y > a_y); // B below A in TD layout
    // The gap should be large enough for a label row
}
```

**What the failing test asserts:** `layout_with_labels` produces ranks with a gap for the label.
**Expected failure reason:** `make_space_for_edge_labels` is not called in the pipeline, so A and B are still 1 rank apart.

### ðŸŸ¢ Green: Minimal Implementation

In `layout_with_labels()`, add the call after `LayoutGraph::from_digraph()` and before `rank::run()`:

```rust
make_space_for_edge_labels(&mut lg, edge_labels);
```

### ðŸ”µ Refactor: Clean Up

- Verify the call site is clear and well-commented
- Ensure `layout()` (the non-label variant) is unaffected

## Context
- `layout_with_labels()` in `src/dagre/mod.rs` is the entry point called from `compute_layout_direct()`
- The pipeline order is: construct graph â†’ (NEW: make space) â†’ rank â†’ normalize â†’ order â†’ position
- `edge_labels` is already passed into this function

## Acceptance Criteria
- [ ] Failing test written and confirmed red
- [ ] `make_space_for_edge_labels` wired into pipeline
- [ ] Labeled edges produce rank gaps
- [ ] Unlabeled edges unaffected
