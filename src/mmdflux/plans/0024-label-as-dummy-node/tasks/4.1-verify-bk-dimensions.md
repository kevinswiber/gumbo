# Task 4.1: Verify BK Handles Label Dummy Dimensions

## Objective
Confirm that the Brandes-Kopf coordinate assignment allocates appropriate horizontal space for label dummy nodes (which have non-zero width unlike regular edge dummies).

## Location
Tests in: `src/dagre/position.rs` or `src/dagre/bk.rs`

## TDD Phases

### ðŸ”´ Red: Write Failing Tests

```rust
#[test]
fn test_bk_allocates_space_for_label_dummy() {
    // Create a graph where a label dummy has significant width
    // Verify that adjacent nodes on the same rank are pushed apart to accommodate
    // the label dummy's width
    let mut g = DiGraph::new();
    let a = g.add_node("A", 5.0, 3.0);
    let b = g.add_node("B", 5.0, 3.0);
    g.add_edge(a, b);

    let mut edge_labels = HashMap::new();
    edge_labels.insert(0, EdgeLabelInfo::new(10.0, 1.0)); // wide label

    let result = layout_with_labels(&g, &LayoutConfig::default(), &edge_labels);

    // The label dummy should have a position in the result
    // and its width should influence the layout
    // (Specific assertions depend on how positions are exposed)
}
```

**What the failing test asserts:** Label dummy dimensions are respected by coordinate assignment â€” nodes aren't placed overlapping the label dummy's bounding box.
**Expected failure reason:** May pass if BK already uses `dimensions[idx]` uniformly for all nodes including dummies.

### ðŸŸ¢ Green: Minimal Implementation

Verification-only if BK handles this. If label dummies have zero dimensions despite being created with non-zero values, trace where the dimensions are lost and fix.

### ðŸ”µ Refactor: Clean Up

N/A if verification-only.

## Context
- BK in `src/dagre/bk.rs` uses `graph.dimensions[idx]` for node width/height
- Label dummies are created with `DummyNode::edge_label(width, height)` in normalization
- The dimensions should flow through to BK via the LayoutGraph's dimensions array
- Regular edge dummies have 0 width, label dummies have non-zero width

## Acceptance Criteria
- [ ] Test confirms BK accounts for label dummy width
- [ ] No node overlap with label dummy bounding box
- [ ] Adjacent real nodes are appropriately separated
