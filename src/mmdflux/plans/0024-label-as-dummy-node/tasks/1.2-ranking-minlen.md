# Task 1.2: Update Longest-Path Ranking to Respect `minlen`

## Objective
Modify the longest-path ranking algorithm to use per-edge `minlen` instead of hardcoded 1.

## Location
Modify: `src/dagre/rank.rs`

## TDD Phases

### ðŸ”´ Red: Write Failing Tests

```rust
#[test]
fn test_longest_path_respects_minlen() {
    // A -> B with minlen=2, B -> C with minlen=1
    let mut g = DiGraph::new();
    let a = g.add_node("A", 5.0, 3.0);
    let b = g.add_node("B", 5.0, 3.0);
    let c = g.add_node("C", 5.0, 3.0);
    g.add_edge(a, b);
    g.add_edge(b, c);

    let mut lg = LayoutGraph::from_digraph(&g, &LayoutConfig::default());
    lg.edge_minlens[0] = 2; // A->B needs minlen=2

    rank::run(&mut lg);

    // A should be rank 0, B should be rank 2 (minlen 2 away), C should be rank 3
    assert_eq!(lg.ranks[lg.node_order[0]], 0); // A
    assert!(lg.ranks[lg.node_order[1]] >= 2);  // B at least 2 away from A
    assert!(lg.ranks[lg.node_order[2]] >= lg.ranks[lg.node_order[1]] + 1); // C at least 1 away from B
}
```

**What the failing test asserts:** Ranks satisfy `rank(target) >= rank(source) + minlen` for each edge.
**Expected failure reason:** Ranking currently uses hardcoded `+ 1`, so B gets rank 1 instead of 2.

### ðŸŸ¢ Green: Minimal Implementation

In the longest-path ranking code, find where rank separation is computed (the `+ 1` or equivalent) and replace with `+ edge_minlens[edge_idx]`.

The key change is in the DFS/BFS traversal that assigns ranks â€” wherever `rank[target] = rank[source] + 1` appears, change to `rank[target] = rank[source] + minlen`.

### ðŸ”µ Refactor: Clean Up

- Ensure the rank normalization step (shifting so minimum rank is 0) still works correctly
- Verify the existing rank tests still pass with all-1 minlens

## Context
- `rank.rs` contains the longest-path algorithm
- The algorithm pushes nodes to the lowest possible rank
- Currently assumes all edges have length 1
- After this change, `minlen` defaults to 1, so existing behavior is preserved unless explicitly changed

## Acceptance Criteria
- [ ] Failing test written and confirmed red
- [ ] Ranking respects per-edge minlen
- [ ] All existing tests pass (backward compatible with default minlen=1)
