# Task 3.2: Verify Label Dummies for Already-Long Edges

## Objective
Confirm that already-long edges (spanning 3+ ranks) with labels still get correct label dummies at the midpoint rank.

## Location
Tests in: `src/dagre/normalize.rs` (or test module)

## TDD Phases

### ðŸ”´ Red: Write Failing Tests

```rust
#[test]
fn test_long_edge_with_label_gets_midpoint_dummy() {
    // A -> B -> C -> D, with label on A -> D (skipping B, C)
    // A -> D spans 3+ ranks. Label dummy should be at midpoint.
    let mut g = DiGraph::new();
    let a = g.add_node("A", 5.0, 3.0);
    let b = g.add_node("B", 5.0, 3.0);
    let c = g.add_node("C", 5.0, 3.0);
    let d = g.add_node("D", 5.0, 3.0);
    g.add_edge(a, b);
    g.add_edge(b, c);
    g.add_edge(c, d);
    g.add_edge(a, d); // long edge with label

    let mut lg = LayoutGraph::from_digraph(&g, &LayoutConfig::default());
    let mut edge_labels = HashMap::new();
    edge_labels.insert(3, EdgeLabelInfo::new(7.0, 1.0)); // label on A->D

    make_space_for_edge_labels(&mut lg, &edge_labels);
    rank::run(&mut lg);
    let chains = normalize::run(&mut lg, &edge_labels);

    // A->D should produce a chain with multiple dummies, one being EdgeLabel type
    let labeled_chain = chains.iter().find(|c| c.label_dummy_index.is_some());
    assert!(labeled_chain.is_some(), "Should have a chain with label dummy");
}
```

**What the failing test asserts:** Long edges with labels produce dummy chains that include a label dummy at the midpoint.
**Expected failure reason:** This should likely pass since long edges already go through normalization. This is a verification task.

### ðŸŸ¢ Green: Minimal Implementation

Verification-only if existing code handles this. Fix if needed.

### ðŸ”µ Refactor: Clean Up

N/A if verification-only.

## Acceptance Criteria
- [ ] Test written confirming label dummy on long edge
- [ ] Label dummy is at the correct midpoint rank
- [ ] Non-label dummies in the chain have zero dimensions
