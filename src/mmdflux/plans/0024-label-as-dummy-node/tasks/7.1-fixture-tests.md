# Task 7.1: Integration Tests with Existing Fixtures

## Objective
Run the full rendering pipeline on existing test fixtures with labels and verify correct output.

## Location
Tests in: `tests/integration.rs`
Fixtures: `tests/fixtures/labeled_edges.mmd`, `tests/fixtures/label_spacing.mmd`, `tests/fixtures/edge_styles.mmd`

## TDD Phases

### ðŸ”´ Red: Write Failing Tests

Run `cargo test --test integration` and capture any failures. Also add explicit assertions:

```rust
#[test]
fn test_labeled_edges_fixture() {
    let input = std::fs::read_to_string("tests/fixtures/labeled_edges.mmd").unwrap();
    let output = render_to_string(&input);

    // All labels should appear in the output
    assert!(output.contains("yes"), "Expected 'yes' label");
    assert!(output.contains("no"), "Expected 'no' label");
    // No labels should overlap with node text
    // No garbled characters
}

#[test]
fn test_label_spacing_fixture() {
    let input = std::fs::read_to_string("tests/fixtures/label_spacing.mmd").unwrap();
    let output = render_to_string(&input);
    // Labels should not overlap each other
    for line in output.lines() {
        // Check no two labels merge into one string
    }
}
```

**What the failing test asserts:** Fixture files render correctly with the new label positioning.
**Expected failure reason:** Output may differ from before due to the layout changes â€” labels may appear in different positions. Review output visually.

### ðŸŸ¢ Green: Minimal Implementation

Fix any rendering issues discovered. Update snapshot expectations if the new output is correct (or better than before).

### ðŸ”µ Refactor: Clean Up

- Update any hardcoded expected output in existing tests
- Document which fixtures now produce different (improved) output

## Acceptance Criteria
- [ ] All fixtures with labels render correctly
- [ ] Labels are positioned between source and target nodes
- [ ] No label/node overlaps
- [ ] No garbled or missing characters
- [ ] `cargo test` passes
