# Task 6.1: Prefer Precomputed Label Positions in Rendering

## Objective
Update edge rendering to reliably use precomputed label positions from the layout engine, reducing fallback to heuristic placement.

## Location
Modify: `src/render/edge.rs` â€” `render_all_edges_with_labels()` and `draw_edge_label_with_tracking()`

## TDD Phases

### ğŸ”´ Red: Write Failing Tests

```rust
#[test]
fn test_label_rendered_at_precomputed_position() {
    let input = r#"graph TD
    A -->|yes| B"#;
    let output = render_to_string(input);

    // "yes" should appear in the output
    assert!(output.contains("yes"), "Label should be rendered");

    // The label should be between A and B rows (not overlapping either node)
    let lines: Vec<&str> = output.lines().collect();
    let a_line = lines.iter().position(|l| l.contains("A")).unwrap();
    let b_line = lines.iter().position(|l| l.contains("B")).unwrap();
    let yes_line = lines.iter().position(|l| l.contains("yes")).unwrap();
    assert!(yes_line > a_line && yes_line < b_line,
        "Label should appear between source and target nodes");
}
```

**What the failing test asserts:** The label is rendered at a position determined by the layout engine (between the two nodes).
**Expected failure reason:** With the full pipeline working, this may pass. If the heuristic still takes over, the label may appear at the wrong position.

### ğŸŸ¢ Green: Minimal Implementation

In `render_all_edges_with_labels()`:
1. Check `edge_label_positions` for a precomputed position
2. If found and within bounds, use it directly
3. Only fall back to heuristic placement if precomputed position is missing

### ğŸ”µ Refactor: Clean Up

- Add logging/debug output when falling back to heuristic placement (helps diagnose issues)
- Simplify the heuristic path now that it's truly a fallback

## Acceptance Criteria
- [ ] Labels rendered at precomputed positions when available
- [ ] Heuristic fallback only used when precomputed position is absent
- [ ] Visual output is correct for simple labeled edge cases
