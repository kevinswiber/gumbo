# Task 1.1: Remove Title Creation from `nesting::run()`

## Objective

Remove title node creation and title nesting edges from the nesting phase so that `run()` only creates `border_top`, `border_bottom`, and their nesting edges. Title nodes will be created post-rank instead (task 2.1).

## Location

Modify: `src/dagre/nesting.rs` — `run()` function

## TDD Phases

### Red: Write Failing Test

```rust
#[test]
fn test_nesting_run_does_not_create_title_node() {
    let mut lg = build_test_titled_compound_layout_graph();
    let sg1_idx = lg.node_index[&"sg1".into()];

    run(&mut lg);

    // After run(), border_title should NOT be populated
    // (title nodes are created post-rank, not during nesting)
    assert!(
        !lg.border_title.contains_key(&sg1_idx),
        "run() should not create title nodes"
    );
    // But border_top and border_bottom should still exist
    assert!(lg.border_top.contains_key(&sg1_idx));
    assert!(lg.border_bottom.contains_key(&sg1_idx));
}
```

**What the failing test asserts:** `run()` should NOT populate `border_title` for titled compounds.
**Expected failure reason:** Current code creates title nodes in `run()` lines 37-42, so `border_title` will contain the title node.

### Green: Minimal Implementation

Remove two blocks from `run()`:

1. **Remove lines 37-42** (title creation in compound loop):
```rust
// DELETE:
if lg.compound_titles.contains(&compound_idx) {
    let title_id = NodeId(format!("_tt_{}", compound_id));
    let title_idx = lg.add_nesting_node(title_id);
    lg.parents[title_idx] = Some(compound_idx);
    lg.border_title.insert(compound_idx, title_idx);
}
```

2. **Replace lines 84-95** (root connection if/else) with unconditional `root → border_top`:
```rust
// REPLACE the if/else with just the else branch:
let e = lg.add_nesting_edge(root_idx, top_idx, nesting_weight);
lg.nesting_edges.insert(e);
```

### Refactor: Clean Up

- The existing `test_nesting_run_adds_title_node_for_titled_compound` test will now fail — mark it for update in task 3.1 or remove it here.
- No dead imports expected (NodeId is still used for border_top/bottom).

## Context

The `build_test_titled_compound_layout_graph()` helper already exists in the test module — it creates a graph with `set_has_title("sg1")`.

The `compound_titles` HashSet is populated by `DiGraph::set_has_title()` during graph construction and transferred to `LayoutGraph` via `from_digraph()`. This field is KEPT — it's used by `insert_title_nodes()` in task 2.1.

## Acceptance Criteria

- [ ] Failing test written and confirmed red
- [ ] Title creation and title nesting edges removed from `run()`
- [ ] `run()` always uses `root → border_top` (no title branch)
- [ ] `border_top`, `border_bottom`, and nesting edges still created correctly
- [ ] New test passes
