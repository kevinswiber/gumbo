# Task 1.2: Update Unit Tests and Snapshot Baselines

## Objective

Update existing unit tests for `spread_points_on_face()` to match the new endpoint formula, and update any integration test snapshot baselines that change.

## Location

Modify: `src/render/intersect.rs` â€” test module
Modify: `tests/snapshots/*.txt` â€” any snapshots that change

## TDD Phases

### ðŸ”´ Red: Identify Failing Tests

After applying Task 1.1, run `cargo test` and identify all failing tests. Expected failures:

```rust
// test_spread_points_count_two: was (2,0),(5,0) â†’ now (0,0),(8,0)
// test_spread_points_count_three: was (2,10),(4,10),(6,10) â†’ now (0,10),(4,10),(8,10)
// test_spread_points_left_right_face: was (5,2),(5,5) â†’ now (5,0),(5,8)
// test_spread_points_narrow_range: 3 on range (0,2) â†’ was (0,_),(1,_),(1,_) â†’ now (0,_),(1,_),(2,_)
```

Also run `cargo test --test integration` to identify snapshot mismatches.

**What the failing tests assert:** Old centering positions that no longer match.
**Expected failure reason:** The formula changed from centering to endpoint-maximizing.

### ðŸŸ¢ Green: Update Test Assertions

Update each failing unit test to assert the new endpoint-maximizing positions:

```rust
#[test]
fn test_spread_points_count_two() {
    let points = spread_points_on_face(NodeFace::Top, 0, (0, 8), 2);
    assert_eq!(points, vec![(0, 0), (8, 0)]);
}

#[test]
fn test_spread_points_count_three() {
    let points = spread_points_on_face(NodeFace::Top, 10, (0, 8), 3);
    assert_eq!(points, vec![(0, 10), (4, 10), (8, 10)]);
}

#[test]
fn test_spread_points_left_right_face() {
    let points = spread_points_on_face(NodeFace::Right, 5, (0, 8), 2);
    assert_eq!(points, vec![(5, 0), (5, 8)]);
}

#[test]
fn test_spread_points_narrow_range() {
    // 3 edges on range (0, 2): positions 0, 1, 2
    let points = spread_points_on_face(NodeFace::Top, 0, (0, 2), 3);
    assert_eq!(points, vec![(0, 0), (1, 0), (2, 0)]);
}
```

For integration snapshots: run `cargo test --test integration` with `UPDATE_SNAPSHOTS=1` or equivalent, then visually verify the updated snapshots look correct (edges should be more spread out).

### ðŸ”µ Refactor: Clean Up

- Remove any test helper code that was specific to the centering formula
- Ensure all tests have clear comments explaining why the expected positions are correct
- Verify `test_spread_points_five_on_wide_face` (strictly increasing) still passes without changes

## Context

The `test_spread_points_five_on_wide_face` test only asserts strict monotonic increase, so it should pass with both formulas. The `test_spread_points_single` test asserts centering for count=1, which is unchanged.

## Acceptance Criteria

- [ ] All unit tests updated to match endpoint formula
- [ ] All unit tests pass
- [ ] Integration tests pass (snapshots updated if needed)
- [ ] Visual verification of any changed snapshots
- [ ] Code refactored with tests still green
- [ ] Commit: "feat(plan-0021): Phase 1 - endpoint-maximizing spread formula"
