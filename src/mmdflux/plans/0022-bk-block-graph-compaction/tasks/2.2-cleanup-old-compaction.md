# Task 2.2: Remove place_block and Simplify CompactionResult

## Objective

Clean up dead code from the old single-pass compaction: remove `place_block()` function and the unused `sink`/`shift` fields from `CompactionResult`.

## Location

Modify: `src/dagre/bk.rs`

## TDD Phases

### ðŸ”´ Red: Write Failing Tests

```rust
#[test]
fn test_compaction_result_no_sink_shift() {
    // CompactionResult should only have x field
    let result = CompactionResult::default();
    assert!(result.x.is_empty());
    // sink and shift fields should not exist â€” compile error if they do
}
```

**What the failing test asserts:** After cleanup, CompactionResult only has the `x` field.

**Expected failure reason:** The test passes with old code (sink/shift still exist). This is a compile-time verification task â€” removing the fields will cause any remaining references to fail compilation.

### ðŸŸ¢ Green: Minimal Implementation

1. Remove `place_block()` function entirely (bk.rs:704-771)
2. Remove `sink` and `shift` fields from `CompactionResult` struct
3. Remove sink/shift from `CompactionResult::new()` and `Default` impl
4. Update `test_compaction_result_default` to not assert on sink/shift
5. Search for any references to `sink` or `shift` and remove them

### ðŸ”µ Refactor: Clean Up

- Run `cargo clippy` to check for warnings
- Run `cargo test` to verify no compilation errors

## Context

After Task 2.1 replaces the compaction algorithm, `place_block()` is dead code. The `sink` and `shift` fields were only used internally by `place_block()` â€” grep confirms they are never read outside `horizontal_compaction()` (only written at lines 651-652 and referenced in one test at lines 1045-1046).

## Acceptance Criteria

- [ ] `place_block()` function removed
- [ ] `sink` and `shift` fields removed from `CompactionResult`
- [ ] No compilation errors
- [ ] All tests pass
- [ ] `cargo clippy` clean
