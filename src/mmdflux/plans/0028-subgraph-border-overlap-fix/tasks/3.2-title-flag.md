# Task 3.2: Implement `is_subgraph_title` flag and protection

## Objective
Add a flag to distinguish subgraph title characters from border line characters, and protect title characters from edge overwrite.

## Location
Modify:
- `src/render/canvas.rs` â€” `Cell` struct, new method, protection check
- `src/render/subgraph.rs` â€” use new method for title text characters

## TDD Phases

### ðŸ”´ Red: Write Failing Tests

Task 3.1's test should already be failing.

### ðŸŸ¢ Green: Minimal Implementation

**canvas.rs â€” Cell struct:**
```rust
pub struct Cell {
    pub ch: char,
    pub is_node: bool,
    pub is_subgraph_border: bool,
    pub is_subgraph_title: bool,  // NEW
    pub connections: Connections,
}
```

**canvas.rs â€” new method:**
```rust
pub fn set_subgraph_title_char(&mut self, x: usize, y: usize, ch: char) {
    if let Some(cell) = self.get_cell_mut(x, y) {
        cell.ch = ch;
        cell.is_subgraph_border = true;
        cell.is_subgraph_title = true;
    }
}
```

**canvas.rs â€” protection in `set_with_connection()`:**
```rust
// Existing check (around line 159):
if cell.is_node || charset.is_arrow(cell.ch) {
    return false;
}
// Add title protection:
if cell.is_subgraph_title {
    return false;
}
```

**subgraph.rs â€” use new method for title chars:**
In `render_subgraph_borders()`, the loop that writes title characters (around lines 37-38) should call `canvas.set_subgraph_title_char()` instead of plain `canvas.set()`.

### ðŸ”µ Refactor: Clean Up

- Ensure `Cell::default()` initializes `is_subgraph_title: false`
- Consider whether the title protection check should be before or after the subgraph border merge logic

## Context

Currently, `set_with_connection()` at canvas.rs line 159 only prevents overwrite when `cell.is_node` or the cell contains an arrow character. Subgraph border cells (including title text) are overwritable. The `is_subgraph_title` flag provides fine-grained protection: border line segments can still be merged with edge junctions, but title text characters are preserved.

## Acceptance Criteria
- [ ] `Cell` has `is_subgraph_title` field
- [ ] `set_subgraph_title_char()` method exists
- [ ] `set_with_connection()` refuses to overwrite title characters
- [ ] `render_subgraph_borders()` uses `set_subgraph_title_char()` for title text
- [ ] Task 3.1's test passes
- [ ] Edge-border junction merging still works for non-title border segments
