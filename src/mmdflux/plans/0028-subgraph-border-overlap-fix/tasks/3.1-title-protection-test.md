# Task 3.1: Test title character protection

## Objective
Write a unit test verifying that edge rendering does not overwrite subgraph title text characters.

## Location
Modify: `src/render/canvas.rs` â€” add unit test

## TDD Phases

### ğŸ”´ Red: Write Failing Tests

```rust
#[test]
fn test_edge_does_not_overwrite_title_text() {
    let charset = CharSet::unicode();
    let mut canvas = Canvas::new(20, 5, &charset);

    // Simulate a subgraph border with embedded title at row 0
    // â”Œâ”€ Test â”€â”
    canvas.set_subgraph_border(0, 0, 'â”Œ');
    canvas.set_subgraph_border(1, 0, 'â”€');
    canvas.set_subgraph_border(2, 0, ' ');
    // Title characters: T, e, s, t
    canvas.set(3, 0, 'T');  // or set_subgraph_title_char when available
    canvas.set(4, 0, 'e');
    canvas.set(5, 0, 's');
    canvas.set(6, 0, 't');
    canvas.set_subgraph_border(7, 0, ' ');
    canvas.set_subgraph_border(8, 0, 'â”€');
    canvas.set_subgraph_border(9, 0, 'â”');

    // Try to draw an edge through the title at column 4
    let overwritten = canvas.set_with_connection(4, 0, 'â”‚', &charset);

    // Title character should be protected
    assert!(!overwritten, "Title character should not be overwritten by edge");
    assert_eq!(canvas.get(4, 0), 'e', "Title 'e' should be preserved");
}
```

**Expected failure reason:** Current `set_with_connection()` only checks `is_node`, not title characters.

### ğŸŸ¢ Green: Minimal Implementation

Covered by Task 3.2.

### ğŸ”µ Refactor: Clean Up

- Also test that border line characters (non-title) CAN still be merged with edge junctions

## Acceptance Criteria
- [ ] Test demonstrates that title text is overwritten by current code
- [ ] After Task 3.2, title text is preserved
