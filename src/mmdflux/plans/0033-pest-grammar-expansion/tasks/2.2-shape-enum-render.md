# Task 2.2: Add Shape Enum Variants and Render Fallbacks

## Objective

Add new variants to the `Shape` enum in the graph layer and update the render layer to fall back to Rectangle rendering for shapes that don't have dedicated rendering yet.

## Location

Modify: `src/graph/node.rs` (Shape enum)
Modify: `src/graph/builder.rs` (ShapeSpec → Shape mapping)
Modify: `src/render/shape.rs` (render fallback)

## TDD Phases

### Red: Write Failing Tests

```rust
#[test]
fn test_stadium_shape_renders_as_rectangle_fallback() {
    let input = "graph TD\nA([Stadium])\n";
    let output = render(input);
    // Should not panic; should render with Rectangle-style box
    assert!(output.contains("Stadium"));
}

#[test]
fn test_cylinder_shape_end_to_end() {
    let input = "graph TD\nA[(Database)]\n";
    let output = render(input);
    assert!(output.contains("Database"));
}
```

**What the failing tests assert:** New shapes render without panicking and display their text content.
**Expected failure reason:** The Shape enum doesn't have the new variants, so the ShapeSpec → Shape conversion fails or panics.

### Green: Minimal Implementation

Add variants to `Shape`:
```rust
pub enum Shape {
    Rectangle,
    Round,
    Diamond,
    Stadium,
    Subroutine,
    Cylinder,
    Circle,
    DoubleCircle,
    Hexagon,
    Asymmetric,
    Trapezoid,
    InvTrapezoid,
}
```

In `builder.rs`, map each new `ShapeSpec` variant to the corresponding `Shape`.

In `render/shape.rs`, add match arms that fall back to Rectangle rendering:
```rust
Shape::Stadium | Shape::Subroutine | Shape::Cylinder |
Shape::Circle | Shape::DoubleCircle | Shape::Hexagon |
Shape::Asymmetric | Shape::Trapezoid | Shape::InvTrapezoid => {
    render_rectangle(canvas, node, charset)
}
```

### Refactor: Clean Up

- Ensure node size calculation accounts for text width consistently across all shape variants
- Consider if Diamond-like shapes (hexagon) should use Diamond rendering instead of Rectangle

## Acceptance Criteria

- [ ] Failing test written and confirmed red
- [ ] Shape enum has all new variants
- [ ] Builder maps all ShapeSpec variants to Shape
- [ ] Render layer handles all shapes without panics
- [ ] All existing tests unaffected
