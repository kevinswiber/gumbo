# Task 9.1: Switch Default and Remove Old Code

## Objective
Make `compute_layout_direct()` the default layout path, then remove the old stagger pipeline code.

## Location
Modify: `src/render/mod.rs`, `src/render/layout.rs`

---

## Implementation

### Step 1: Switch the default

In `src/render/mod.rs`, change:
```rust
let layout = compute_layout_dagre(diagram, &config);
```
to:
```rust
let layout = compute_layout_direct(diagram, &config);
```

Run `cargo test` — all tests must pass.

### Step 2: Remove old stagger pipeline

Remove from `src/render/layout.rs`:

1. `compute_stagger_positions()` (~116 lines)
2. `map_cross_axis()` (~79 lines)
3. `rank_cross_anchors` construction block (~28 lines) within `compute_layout_dagre`
4. `global_scale` computation (~14 lines) within `compute_layout_dagre`
5. Stagger-related parameter threading in `compute_layout_dagre` (~60 lines)
6. `compute_layout_dagre()` itself (replaced by `compute_layout_direct`)

**Do NOT remove** (still used by the non-dagre `compute_layout()` fallback):
- `compute_grid_positions()`
- `grid_to_draw_vertical()` / `grid_to_draw_horizontal()`

### Step 3: Rename

Rename `compute_layout_direct()` to `compute_layout_dagre()` to preserve the public API name (or update all call sites if a new name is preferred).

### Step 4: Verify

```bash
cargo test
cargo clippy
```

No dead code warnings, no test failures.

---

## TDD Note

This task is a pure deletion/rename — no new behavior to test-drive. The existing tests from Phases 2–8 cover all the behavior. The key discipline: run `cargo test` after each removal step to catch any broken references immediately.

## Acceptance Criteria
- [ ] Default renderer uses the new direct translation pipeline
- [ ] Old stagger functions removed (~300 lines)
- [ ] No dead code warnings from `cargo clippy`
- [ ] All tests pass
- [ ] Commit: `feat(plan-0019): Phase 9 - Switch to direct translation, remove stagger pipeline`
