# Task 5.1: All-fixtures regression sweep and snapshot update

## Objective

Run the full test suite and visually inspect key fixtures to confirm all four regressions are fixed and no new regressions are introduced.

## Location

Run: `tests/integration.rs` (existing tests + new ones from this plan)

## TDD Phases

### ðŸ”´ Red: Verify all tests pass

Run `cargo test` and fix any failures from the Phase 1-4 changes.

### ðŸŸ¢ Green: Visual inspection

Render key fixtures and visually inspect:

```bash
cd ~/src/mmdflux-label-dummy

# Primary regression fixture
cargo run -- tests/fixtures/labeled_edges.mmd

# Label fixtures
cargo run -- tests/fixtures/label_spacing.mmd

# Cycle fixtures
cargo run -- tests/fixtures/simple_cycle.mmd
cargo run -- tests/fixtures/multiple_cycles.mmd
cargo run -- tests/fixtures/http_request.mmd

# Edge style fixtures
cargo run -- tests/fixtures/edge_styles.mmd

# Direction fixtures
cargo run -- tests/fixtures/left_right.mmd
cargo run -- tests/fixtures/right_left.mmd
cargo run -- tests/fixtures/bottom_top.mmd

# Complex fixtures
cargo run -- tests/fixtures/complex.mmd
cargo run -- tests/fixtures/ci_pipeline.mmd
cargo run -- tests/fixtures/git_workflow.mmd
```

Check each output for:
- Labels visible and correctly positioned
- Compact layout (no excessive vertical expansion)
- Backward edges route compactly (no tall columns)
- Node text intact (no arrow corruption)
- Edge styles preserved
- All directions render correctly

### ðŸ”µ Refactor: Final cleanup

- Update any snapshot baselines that changed
- Remove any debug/temporary code
- Ensure all new tests have descriptive names

## Context

- Label-free diagrams should be unaffected (global minlen only activates when labels present)
- The main regression is `labeled_edges.mmd` but other fixtures may have secondary effects
- Some fixtures don't have labels and should render identically to the main branch

## Acceptance Criteria

- [ ] `cargo test` passes (all tests green)
- [ ] `cargo clippy` passes
- [ ] `labeled_edges.mmd` renders compactly with all 5 labels
- [ ] Cycle fixtures render with compact backward edges
- [ ] Diamond text intact in all fixtures
- [ ] Direction fixtures (LR, RL, BT) render correctly
- [ ] Label-free fixtures unchanged from main branch
- [ ] Snapshots updated if needed
