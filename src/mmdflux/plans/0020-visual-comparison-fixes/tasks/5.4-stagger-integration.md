# Task 5.4: Integration Test for Stagger Visibility

## Objective
Verify that skip-edge stagger produces visually correct output for key test fixtures.

## Location
Modify: `tests/integration.rs`

## TDD Phases

### ðŸ”´ Red: Write Failing Tests

```rust
#[test]
fn test_double_skip_rendered_stagger() {
    let input = std::fs::read_to_string("tests/fixtures/double_skip.mmd").unwrap();
    let flowchart = parse_flowchart(&input).unwrap();
    let diagram = build_diagram(&flowchart);
    let config = RenderConfig::default();
    let layout = compute_layout_direct(&diagram, &config);
    let output = render(&layout, &config);

    // The skip edges (A->C, A->D) should route through distinct columns
    // that don't overlap with the B or C node columns
    // (Exact assertion depends on rendered output format)

    // At minimum: the output should not have edge characters inside node boxes
    // (other than source/target connection points)
}

#[test]
fn test_skip_edge_collision_resolved() {
    let input = std::fs::read_to_string("tests/fixtures/skip_edge_collision.mmd").unwrap();
    let flowchart = parse_flowchart(&input).unwrap();
    let diagram = build_diagram(&flowchart);
    let config = RenderConfig::default();
    let layout = compute_layout_direct(&diagram, &config);
    let output = render(&layout, &config);

    // Verify no overlapping characters in the output
    // (detailed assertion TBD based on fixture content)
}
```

**What the failing test asserts:** Skip edges have visible separation from intermediate nodes in rendered output.
**Expected failure reason:** Without the nudge pass, skip edges overlap with nodes.

### ðŸŸ¢ Green: Minimal Implementation

*(Tests should pass after Task 5.3)*

### ðŸ”µ Refactor: Clean Up

- Consider adding snapshot tests for these fixtures
- Update baseline snapshots if they exist

## Acceptance Criteria
- [ ] `double_skip.mmd` renders with clear skip-edge stagger
- [ ] `skip_edge_collision.mmd` renders without overlaps
- [ ] All existing integration tests pass
