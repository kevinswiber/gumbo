# Task 1.2: Add `compound_titles` and `set_has_title()`

## Objective
Allow the caller to mark compound nodes as having titles, and propagate this to LayoutGraph so that `nesting::run()` knows which compounds need title dummy nodes.

## Location
Modify: `src/dagre/graph.rs` (both `DiGraph` and `LayoutGraph`)

## TDD Phases

### ðŸ”´ Red: Write Failing Tests

```rust
#[test]
fn test_digraph_set_has_title() {
    let mut g: DiGraph<(f64, f64)> = DiGraph::new();
    g.add_node("sg1", (0.0, 0.0));
    g.set_has_title("sg1");
    // Verify it's tracked
    assert!(g.has_title("sg1"));
}

#[test]
fn test_compound_titles_propagated_to_layout_graph() {
    let mut g: DiGraph<(f64, f64)> = DiGraph::new();
    g.add_node("A", (10.0, 10.0));
    g.add_node("sg1", (0.0, 0.0));
    g.set_parent("A", "sg1");
    g.set_has_title("sg1");
    let lg = LayoutGraph::from_digraph(&g, |_, dims| *dims);
    let sg1_idx = lg.node_index[&"sg1".into()];
    assert!(lg.compound_titles.contains(&sg1_idx));
}

#[test]
fn test_untitled_compound_not_in_compound_titles() {
    let mut g: DiGraph<(f64, f64)> = DiGraph::new();
    g.add_node("A", (10.0, 10.0));
    g.add_node("sg1", (0.0, 0.0));
    g.set_parent("A", "sg1");
    // No set_has_title call
    let lg = LayoutGraph::from_digraph(&g, |_, dims| *dims);
    let sg1_idx = lg.node_index[&"sg1".into()];
    assert!(!lg.compound_titles.contains(&sg1_idx));
}
```

**What the failing test asserts:** `set_has_title()` exists on DiGraph, `has_title()` returns true, and `compound_titles` on LayoutGraph contains the compound's index.
**Expected failure reason:** Methods and field do not exist.

### ðŸŸ¢ Green: Minimal Implementation

On DiGraph:
```rust
/// Node IDs of compounds with non-empty titles.
pub nodes_with_title: HashSet<NodeId>,

pub fn set_has_title(&mut self, node: impl Into<NodeId>) {
    self.nodes_with_title.insert(node.into());
}

pub fn has_title(&self, node: impl Into<NodeId>) -> bool {
    self.nodes_with_title.contains(&node.into())
}
```

On LayoutGraph:
```rust
/// Compound node indices that have non-empty titles.
pub compound_titles: HashSet<usize>,
```

In `from_digraph()`, after building `node_index`:
```rust
let compound_titles: HashSet<usize> = digraph.nodes_with_title.iter()
    .filter_map(|id| node_index.get(id).copied())
    .collect();
```

### ðŸ”µ Refactor: Clean Up

Initialize `nodes_with_title: HashSet::new()` in DiGraph's constructor. Ensure `HashSet` is imported.

## Context
The render layer (`compute_layout_direct()`) will call `set_has_title()` for each subgraph with a non-empty title before calling `dagre::layout()`. See Task 4.1.

## Acceptance Criteria
- [ ] Failing tests written and confirmed red
- [ ] `set_has_title()` and `has_title()` added to DiGraph
- [ ] `compound_titles` added to LayoutGraph and populated in `from_digraph()`
- [ ] All tests pass
