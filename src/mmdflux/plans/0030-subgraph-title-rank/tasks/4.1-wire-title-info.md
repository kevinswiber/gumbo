# Task 4.1: Wire Title Info in `compute_layout_direct()`

## Objective
Call `dgraph.set_has_title()` for each subgraph with a non-empty title in `compute_layout_direct()`, so the dagre layer creates title dummy nodes.

## Location
Modify: `src/render/layout.rs` (`compute_layout_direct()`)

## TDD Phases

### ðŸ”´ Red: Write Failing Tests

```rust
#[test]
fn test_layout_titled_subgraph_has_title_rank_space() {
    use crate::graph::build_diagram;
    use crate::parser::parse_flowchart;

    let input = "graph TD\nsubgraph sg1[Group]\nA --> B\nend\n";
    let flowchart = parse_flowchart(input).unwrap();
    let diagram = build_diagram(&flowchart);
    let layout = compute_layout_direct(&diagram, &LayoutConfig::default());

    // The layout result should include the subgraph
    assert!(layout.subgraph_bounds.contains_key("sg1"));
    let bounds = &layout.subgraph_bounds["sg1"];

    // With the title rank, the subgraph should have extra height
    // compared to the content alone
    assert!(bounds.height > 0, "Subgraph should have non-zero height");
}
```

**What the failing test asserts:** Layout produces subgraph bounds that account for the title rank.
**Expected failure reason:** `set_has_title()` is not called, so no title rank is created, and bounds don't include title space.

### ðŸŸ¢ Green: Minimal Implementation

In `compute_layout_direct()`, where subgraph compound nodes are added to `dgraph`, add `set_has_title()` calls:

```rust
for (sg_id, sg) in &diagram.subgraphs {
    dgraph.add_node(sg_id.as_str(), (0, 0));
    if !sg.title.is_empty() {
        dgraph.set_has_title(sg_id.as_str());
    }
    // ... existing parent setup ...
}
```

### ðŸ”µ Refactor: Clean Up

Verify that the subgraph title string is accessible from the Diagram's subgraph data. Check what field name is used (likely `title` or `label`).

## Context
This is the bridge between the render layer (which knows about titles) and the dagre layer (which creates the structural title rank). The render layer constructs the DiGraph and passes title information before calling `dagre::layout()`.

## Acceptance Criteria
- [ ] Failing test written and confirmed red
- [ ] `set_has_title()` called for titled subgraphs in `compute_layout_direct()`
- [ ] Layout result includes title rank space in subgraph bounds
- [ ] Test passes
