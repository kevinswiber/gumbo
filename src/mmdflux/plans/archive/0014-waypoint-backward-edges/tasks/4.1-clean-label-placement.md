# Task 4.1: Clean Up Backward Edge Label Placement

## Objective

Remove corridor-specific backward edge label placement logic from `edge.rs`. With waypoint routing, backward edges have the same segment structure as forward edges and can use the same label placement code.

## Location

Modify: `src/render/edge.rs` — function `draw_edge_label_with_tracking()` at lines 43-176.

## Implementation

In `draw_edge_label_with_tracking()`, replace the backward edge detection and special-case label logic (lines 52-67):

```rust
// BEFORE (lines 52-67):
// Detect if this is a backward edge (going against layout direction)
let is_backward = match direction {
    Direction::LeftRight => routed.end.x < routed.start.x,
    Direction::RightLeft => routed.end.x > routed.start.x,
    Direction::TopDown => routed.end.y < routed.start.y,
    Direction::BottomTop => routed.end.y > routed.start.y,
};

// Calculate base position for label
let (base_x, base_y) = if is_backward && routed.segments.len() >= 4 {
    // For backward edges with 4 segments (connector + 3 routing segments),
    // place label on segment[2] which is the long corridor segment
    find_label_position_on_segment(&routed.segments[2], label_len, direction)
} else if is_backward && routed.segments.len() == 3 {
    // For backward edges with 3 segments, use segment[1] (the corridor)
    find_label_position_on_segment(&routed.segments[1], label_len, direction)
} else {
```

```rust
// AFTER:
// Calculate base position for label
// (backward edges now use the same segment structure as forward edges)
let (base_x, base_y) = {
```

The `is_backward` variable and its two corridor-specific branches are removed entirely. The remaining code (the `else` branch for forward edges, lines 68-119) becomes the only path, handling all edges uniformly.

Keep the `is_backward` detection **only if** it's used elsewhere in the function. Check lines 120+ for any other references to `is_backward`. If none, remove it entirely.

## Context

- With corridor routing, backward edges had exactly 3 segments (H-V-H or V-H-V), and the label was placed on the middle (corridor) segment.
- With waypoint routing, backward edges have the same orthogonal segment structure as forward edges — multiple V-H-V or H-V-H segments through waypoints.
- The forward-edge label placement logic (placing beside the last vertical segment for branching, or at the midpoint for simple paths) works correctly for both forward and backward edges.
- For edges with pre-computed `label_positions` from dagre denormalization, the calling function `render_all_edges_with_labels()` already uses those positions — this function is the fallback heuristic.

## Acceptance Criteria

- [ ] Backward edge label branches removed from `draw_edge_label_with_tracking()`
- [ ] All edges use the same label placement logic
- [ ] `cargo build` compiles
- [ ] `cargo test` passes — label placement tests still work
