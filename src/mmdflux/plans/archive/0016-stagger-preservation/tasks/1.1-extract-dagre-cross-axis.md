# Task 1.1: Extract Dagre Cross-Axis Positions Per Node

## Objective

Capture each node's dagre cross-axis coordinate (x for TD/BT, y for LR/RL) so it can be used to compute staggered draw positions instead of centering each layer independently.

## Location

Modify: `src/render/layout.rs` â€” inside `compute_layout_dagre()`, after the `result = dagre::layout_with_labels(...)` call (around line 250).

## Implementation

After extracting layers and sorting within each layer (existing code at lines 256-303), build a map of dagre cross-axis center positions:

```rust
// After layer extraction (line 303), capture dagre cross-axis positions
let dagre_cross_positions: HashMap<String, f64> = result
    .nodes
    .iter()
    .map(|(id, rect)| {
        let cross = if is_vertical {
            rect.x + rect.width / 2.0  // center_x for TD/BT
        } else {
            rect.y + rect.height / 2.0  // center_y for LR/RL
        };
        (id.0.clone(), cross)
    })
    .collect();
```

This map is passed to `grid_to_draw_vertical()` / `grid_to_draw_horizontal()` in tasks 1.3/1.4.

## Context

- The dagre result is `result: dagre::LayoutResult` which contains `result.nodes: HashMap<NodeId, Rect>` with `x`, `y`, `width`, `height` fields.
- For `multiple_cycles.mmd`, dagre computes: A at x=41.75, B at x=16.75, C at x=15.0. The cross-axis center is `x + width/2`.
- This data is currently extracted at line 256 as `secondary` but only used for within-layer sorting, then discarded.

## Acceptance Criteria

- [ ] `dagre_cross_positions` HashMap built for all nodes
- [ ] Correctly uses x for vertical layouts, y for horizontal layouts
- [ ] Uses center (not top-left corner) of the dagre bounding box
- [ ] Passed as parameter to draw functions (tasks 1.3/1.4)
