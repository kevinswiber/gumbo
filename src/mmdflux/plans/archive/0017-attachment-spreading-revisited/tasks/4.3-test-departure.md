# Task 4.3: Test Departure-Side Overlap

## Objective

Add an integration test for `fan_out.mmd` verifying that departure lines from the source node's bottom face are not adjacent.

## Location

Modify: `tests/integration.rs`

## Implementation

```rust
#[test]
fn fan_out_no_departure_overlap() {
    let output = render_fixture("fan_out.mmd");
    // Check for adjacent down-arrows
    assert_no_adjacent_arrows(&output, "fan_out.mmd");
    // Also check for adjacent vertical pipe characters (departure lines)
    for (line_num, line) in output.lines().enumerate() {
        assert!(
            !line.contains("││"),
            "fan_out.mmd: line {} has adjacent departure lines: {}",
            line_num + 1, line
        );
    }
}
```

## Context

- Departure-side overlap manifests as adjacent `│` characters on rows below the source node, rather than as adjacent arrows.
- The `││` check is a simple string match. However, `││` might legitimately appear in node borders. The test may need refinement — for example, only checking rows that are between the source node's bottom border and the first waypoint turn.
- If the simple `││` check produces false positives from node borders, consider checking only rows in a specific range, or using a more targeted assertion.

## Acceptance Criteria

- [ ] Test for `fan_out.mmd` passes
- [ ] Verifies no adjacent arrows (`▼▼`) in the output
- [ ] Verifies no adjacent departure lines (`││`) below the source node
