# Task 1.1: Add Subgraph AST Type

## Objective

Add `SubgraphSpec` struct and `Statement::Subgraph` variant to the parser AST, enabling the parser to represent subgraph blocks.

## Location

Modify: `src/parser/ast.rs`

## TDD Phases

### Red: Write Failing Tests

```rust
#[test]
fn test_subgraph_spec_construction() {
    let sg = SubgraphSpec {
        id: "sg1".to_string(),
        title: "My Group".to_string(),
        statements: vec![],
    };
    assert_eq!(sg.id, "sg1");
    assert_eq!(sg.title, "My Group");
    assert!(sg.statements.is_empty());
}

#[test]
fn test_statement_subgraph_variant() {
    let sg = SubgraphSpec {
        id: "sg1".to_string(),
        title: "Title".to_string(),
        statements: vec![
            Statement::Vertex(Vertex { id: "A".to_string(), shape: None }),
        ],
    };
    let stmt = Statement::Subgraph(sg);
    match &stmt {
        Statement::Subgraph(s) => {
            assert_eq!(s.id, "sg1");
            assert_eq!(s.statements.len(), 1);
        }
        _ => panic!("Expected Subgraph variant"),
    }
}
```

**What the failing test asserts:** SubgraphSpec struct exists with id, title, statements fields; Statement enum has a Subgraph variant.
**Expected failure reason:** `SubgraphSpec` type does not exist; `Statement::Subgraph` variant does not exist.

### Green: Minimal Implementation

Add to `src/parser/ast.rs`:

```rust
#[derive(Debug, Clone, PartialEq, Eq)]
pub struct SubgraphSpec {
    pub id: String,
    pub title: String,
    pub statements: Vec<Statement>,
}
```

Add variant to `Statement` enum:

```rust
pub enum Statement {
    Vertex(Vertex),
    Edge(EdgeSpec),
    Subgraph(SubgraphSpec),
}
```

### Refactor: Clean Up

- Verify doc comments are consistent with existing types
- Ensure derive macros match other AST types (Debug, Clone, PartialEq, Eq)

## Context

- Existing AST types: `ShapeSpec`, `Vertex`, `ConnectorSpec`, `EdgeSpec`, `Statement`
- `Statement` currently has only `Vertex` and `Edge` variants
- The `SubgraphSpec` uses `Vec<Statement>` for recursive nesting support (future-proofing), though this plan only implements single-level

## Acceptance Criteria

- [ ] Failing test written and confirmed red
- [ ] `SubgraphSpec` struct with `id: String`, `title: String`, `statements: Vec<Statement>`
- [ ] `Statement::Subgraph(SubgraphSpec)` variant added
- [ ] Minimal implementation passes the test
- [ ] Code refactored with tests still green
- [ ] All existing tests pass
