# Task 3.3: Run Full Test Suite and Fix Regressions

## Objective
Run the complete test suite, fix any regressions caused by the ordering changes, and validate the output for `complex.mmd`.

## Location
No specific file -- validation task.

## Implementation

### 1. Run unit tests
```bash
cargo test
```

Fix any failures. The new ordering algorithm may produce different (but valid) orderings for some test cases. If integration tests have snapshot-style expected outputs, those may need updating.

### 2. Run clippy
```bash
cargo clippy
```

Fix any warnings.

### 3. Run integration tests
```bash
cargo test --test integration
```

### 4. Manual validation with complex.mmd
```bash
cargo run -- tests/fixtures/complex.mmd
```

Compare output against Mermaid's expected layout:
- Main flow (Input → Validate → Process → More Data?) should be on the **left**
- Error handling (Error Handler → Log Error / Notify Admin) should be on the **right**
- Backward edge ("yes" loop) should go up the left side

### 5. Run comparison script (if available)
```bash
# Check if compare script exists
ls scripts/compare*.sh
```

## Context

The ordering changes affect the fundamental layout structure. Some integration test expected outputs may change. This is expected -- the new orderings should be **better** (fewer crossings, more intuitive structure), but they will be different.

Key fixtures to check:
- `tests/fixtures/complex.mmd` - The primary validation target
- `tests/fixtures/decision.mmd` - Branching structure
- `tests/fixtures/simple_cycle.mmd` - Backward edges
- `tests/fixtures/multiple_cycles.mmd` - Multiple backward edges

## Acceptance Criteria
- [ ] `cargo test` passes (all unit tests)
- [ ] `cargo test --test integration` passes
- [ ] `cargo clippy` clean
- [ ] `complex.mmd` renders with main flow on left, error handling on right
- [ ] No regression in rendering quality for other fixtures
