# Task 2.2: Verify Dagre Handles Multi-Level Nesting

## Objective
Add a test that verifies dagre correctly ranks nodes across two levels of nesting, confirming the research finding that dagre already supports multi-level nesting.

## Location
Modify: `src/dagre/mod.rs` or `src/dagre/nesting.rs` (tests section)

## TDD Phases

### ðŸ”´ Red: Write Failing Tests

```rust
#[test]
fn test_layout_multi_level_compound_nesting() {
    let mut g: DiGraph<(f64, f64)> = DiGraph::new();
    g.add_node("A", (40.0, 20.0));
    g.add_node("B", (40.0, 20.0));
    g.add_node("inner", (0.0, 0.0));
    g.add_node("outer", (0.0, 0.0));
    g.add_edge_with_label("A", "B", "");
    g.set_parent("A", "inner");
    g.set_parent("B", "inner");
    g.set_parent("inner", "outer");

    let config = LayoutConfig::default();
    let result = layout(&g, &config);

    // Both nodes should have positions
    assert!(result.nodes.contains_key("A"));
    assert!(result.nodes.contains_key("B"));
    // Layout should complete without panics
}
```

**What the failing test asserts:** Dagre produces valid layout results for two-level compound nesting.
**Expected failure reason:** This test may already pass (confirming research). If it doesn't, there's a dagre bug to investigate.

### ðŸŸ¢ Green: Minimal Implementation

If the test passes, no code changes needed. If it fails, debug the nesting algorithm to handle compound-in-compound correctly.

### ðŸ”µ Refactor: Clean Up

Add additional assertions about rank ordering if useful:
- Border_top(outer) rank <= border_top(inner) rank <= A/B rank <= border_bottom(inner) <= border_bottom(outer)

## Context
Research Q2 found that dagre's nesting algorithm should handle multi-level nesting because it iterates all compound nodes and creates border/nesting edges for each. This task is a verification step.

## Acceptance Criteria
- [ ] Test written and confirms dagre handles multi-level nesting
- [ ] Layout produces valid positions for all nodes
- [ ] No panics during layout
