# Task 4.1: Add `is_ancestor()` Helper

## Objective
Create a helper function that determines if one subgraph is an ancestor of another, needed to distinguish nested pairs from sibling pairs in overlap resolution.

## Location
Modify: `src/render/layout.rs` (new private function)

## TDD Phases

### ðŸ”´ Red: Write Failing Tests

```rust
#[test]
fn test_is_ancestor() {
    let mut subgraphs = HashMap::new();
    subgraphs.insert("outer".to_string(), Subgraph {
        id: "outer".to_string(), title: "Outer".to_string(),
        nodes: vec![], parent: None,
    });
    subgraphs.insert("inner".to_string(), Subgraph {
        id: "inner".to_string(), title: "Inner".to_string(),
        nodes: vec![], parent: Some("outer".to_string()),
    });
    subgraphs.insert("sibling".to_string(), Subgraph {
        id: "sibling".to_string(), title: "Sibling".to_string(),
        nodes: vec![], parent: None,
    });
    assert!(is_ancestor("outer", "inner", &subgraphs));
    assert!(!is_ancestor("inner", "outer", &subgraphs));
    assert!(!is_ancestor("outer", "sibling", &subgraphs));
    assert!(!is_ancestor("sibling", "inner", &subgraphs));
}
```

**What the failing test asserts:** `is_ancestor` correctly identifies ancestor relationships.
**Expected failure reason:** Function does not exist yet.

### ðŸŸ¢ Green: Minimal Implementation

```rust
fn is_ancestor(
    potential_ancestor: &str,
    sg_id: &str,
    subgraphs: &HashMap<String, crate::graph::Subgraph>,
) -> bool {
    let mut current = sg_id;
    while let Some(sg) = subgraphs.get(current) {
        if let Some(ref parent) = sg.parent {
            if parent == potential_ancestor {
                return true;
            }
            current = parent;
        } else {
            break;
        }
    }
    false
}
```

### ðŸ”µ Refactor: Clean Up

None expected. Simple utility function.

## Acceptance Criteria
- [ ] Failing test written and confirmed red
- [ ] Correctly identifies direct parent-child relationships
- [ ] Correctly identifies transitive ancestor relationships (grandparent)
- [ ] Returns false for siblings, non-related subgraphs
- [ ] Code refactored with tests still green
