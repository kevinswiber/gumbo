# Task 1.4: Add Hierarchy Query Helpers to `Diagram`

## Objective
Add `subgraph_children()` and `subgraph_depth()` utility methods to `Diagram` for querying the subgraph hierarchy. These will be used by later phases (bounds computation, overlap resolution, z-order rendering).

## Location
Modify: `src/graph/diagram.rs`

## TDD Phases

### ðŸ”´ Red: Write Failing Tests

```rust
#[test]
fn test_subgraph_children() {
    let input = "graph TD\nsubgraph outer[Outer]\nA\nsubgraph inner[Inner]\nB\nend\nend\n";
    let flowchart = parse_flowchart(input).unwrap();
    let diagram = build_diagram(&flowchart);
    let children = diagram.subgraph_children("outer");
    assert_eq!(children.len(), 1);
    assert!(children.contains(&&"inner".to_string()));
    assert!(diagram.subgraph_children("inner").is_empty());
}

#[test]
fn test_subgraph_depth() {
    let input = "graph TD\nsubgraph outer[Outer]\nsubgraph inner[Inner]\nA\nend\nend\n";
    let flowchart = parse_flowchart(input).unwrap();
    let diagram = build_diagram(&flowchart);
    assert_eq!(diagram.subgraph_depth("outer"), 0);
    assert_eq!(diagram.subgraph_depth("inner"), 1);
}
```

**What the failing test asserts:** `subgraph_children` returns direct child subgraph IDs; `subgraph_depth` returns nesting depth (0 = top-level).
**Expected failure reason:** Methods do not exist on `Diagram`.

### ðŸŸ¢ Green: Minimal Implementation

```rust
impl Diagram {
    pub fn subgraph_children(&self, parent_id: &str) -> Vec<&String> {
        self.subgraphs.values()
            .filter(|sg| sg.parent.as_deref() == Some(parent_id))
            .map(|sg| &sg.id)
            .collect()
    }

    pub fn subgraph_depth(&self, sg_id: &str) -> usize {
        let mut depth = 0;
        let mut current = sg_id;
        while let Some(sg) = self.subgraphs.get(current) {
            if let Some(ref parent) = sg.parent {
                depth += 1;
                current = parent;
            } else {
                break;
            }
        }
        depth
    }
}
```

### ðŸ”µ Refactor: Clean Up

Consider whether `subgraph_children` should return `Vec<&str>` instead of `Vec<&String>` for API consistency.

## Context
These helpers decouple hierarchy queries from the `parent` field, making downstream code cleaner. `subgraph_depth` will be used for z-order sorting (Phase 5). `subgraph_children` will be used for bounds computation (Phase 3).

## Acceptance Criteria
- [ ] Failing tests written and confirmed red
- [ ] `subgraph_children()` returns direct child subgraph IDs
- [ ] `subgraph_depth()` returns correct depth for all nesting levels
- [ ] Handles non-existent subgraph IDs gracefully (returns empty/0)
- [ ] Code refactored with tests still green
