# Task 1.2: Propagate Parent Context in `process_statements`

## Objective
When processing a `Statement::Subgraph` inside another subgraph, set the inner subgraph's `parent` to the outer subgraph's ID.

## Location
Modify: `src/graph/builder.rs` (lines 36-49, `Statement::Subgraph` arm)

## TDD Phases

### ðŸ”´ Red: Write Failing Tests

```rust
#[test]
fn test_nested_subgraph_parent_set() {
    let input = "graph TD\nsubgraph outer[Outer]\nsubgraph inner[Inner]\nA --> B\nend\nend\n";
    let flowchart = parse_flowchart(input).unwrap();
    let diagram = build_diagram(&flowchart);
    assert_eq!(diagram.subgraphs["inner"].parent, Some("outer".to_string()));
    assert_eq!(diagram.subgraphs["outer"].parent, None);
}
```

**What the failing test asserts:** Inner subgraph's `parent` is set to the enclosing subgraph ID; top-level subgraph's `parent` is `None`.
**Expected failure reason:** The builder currently sets `parent: None` for all subgraphs (added in Task 1.1).

### ðŸŸ¢ Green: Minimal Implementation

In the `Statement::Subgraph` arm of `process_statements` (builder.rs line ~42), use the `parent_subgraph` parameter:

```rust
Statement::Subgraph(sg_spec) => {
    process_statements(diagram, &sg_spec.statements, Some(&sg_spec.id));
    let node_ids = collect_node_ids(&sg_spec.statements);
    diagram.subgraphs.insert(
        sg_spec.id.clone(),
        Subgraph {
            id: sg_spec.id.clone(),
            title: sg_spec.title.clone(),
            nodes: node_ids,
            parent: parent_subgraph.map(|s| s.to_string()),
        },
    );
}
```

### ðŸ”µ Refactor: Clean Up

None expected. The change is minimal â€” just replacing `parent: None` with `parent: parent_subgraph.map(|s| s.to_string())`.

## Context
`process_statements` already receives `parent_subgraph: Option<&str>` and passes it recursively. The parameter is currently only used for setting node parents (line ~61). This task extends its use to subgraph parents.

## Acceptance Criteria
- [ ] Failing test written and confirmed red
- [ ] Inner subgraphs get `parent: Some(outer_id)`
- [ ] Top-level subgraphs get `parent: None`
- [ ] Code refactored with tests still green
